diff -Nur module-init-tools-3.2.2/modprobe.c module-init-tools-3.2.2.modprobe_d/modprobe.c
--- module-init-tools-3.2.2/modprobe.c	2005-12-02 00:42:09.000000000 +0100
+++ module-init-tools-3.2.2.modprobe_d/modprobe.c	2006-01-21 03:11:18.000000000 +0100
@@ -59,6 +59,8 @@
 	char filename[0];
 };
 
+char *modprobe_d_ver = NULL;
+
 #ifndef MODULE_DIR
 #define MODULE_DIR "/lib/modules"
 #endif
@@ -1245,9 +1247,7 @@
 			if (len < 6 ||
 			    (strcmp(&i->d_name[len-5], ".conf") != 0 &&
 			     strcmp(&i->d_name[len-6], ".alias") != 0))
-				warn("All config files need .conf: %s/%s, "
-				     "it will be ignored in a future release.\n",
-				     filename, i->d_name);
+					continue;
 			fe = malloc(sizeof(struct file_entry) + len + 1);
 			if (fe == NULL)
 				continue;
@@ -1308,6 +1308,11 @@
 		warn("Deprecated config file /etc/modprobe.conf, "
 		      "all config files belong into /etc/modprobe.d/.\n");
 
+	/* kernel ver based config */
+	if ( modprobe_d_ver != NULL )
+			parse_config_scan(modprobe_d_ver, name, dump_only, removing,
+							options, commands, aliases, blacklist);
+
 	/* default config */
 	parse_config_scan("/etc/modprobe.d", name, dump_only, removing,
 			  options, commands, aliases, blacklist);
